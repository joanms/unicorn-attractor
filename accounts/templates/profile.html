<!--This is based on code from the Authentication and Authorisation unit of the course.-->

{% extends 'base.html' %} 

{% block page_title %}Your Profile{% endblock %} 

{% block content %}

<!--A registered user's profile details-->
<div class="mx-auto small-container">
    
    <h1>Your Profile</h1>
    <strong>Username:</strong> {{ user.username }} <br>
    <strong>Date Joined:</strong> {{ user.date_joined }} <br>
    <strong>Email Address:</strong> {{ user.email }} <br>

    <h2>Bug Reports</h2>
    {% if bug_reports %}
        {% for bug in bug_reports %}
            <a href="{% url 'bug_details' bug.id %}">{{ bug }}</a>, {{ bug.date_submitted }}<br>
        {% endfor %}
    {% else %}
        <p>You haven't reported any bugs. <a href="{% url 'report_bug' %}">Report one</a>.</p>
    {% endif %}    

    <h2>Feature Requests</h2>
    {% if feature_requests %}
        {% for feature in feature_requests %}
            <a href="{% url 'feature_details' feature.id %}">{{ feature }}</a>, {{ feature.date_submitted }}<br>
        {% endfor %}
    {% else %}
        <p>You haven't requested any features. <a href="{% url 'request_feature' %}">Request one</a>.</p>
    {% endif %}    

    <h2>Bug Upvotes</h2>
    {% if bug_upvotes %}
        {% for upvote in bug_upvotes %}
            <a href="{% url 'bug_details' upvote.bug.id %}">{{ upvote.bug }}</a>, {{ upvote.date }}<br>
        {% endfor %}
    {% else %}
        <p>You haven't upvoted any bugs. <a href="{% url 'list_bugs' %}">View the list of bugs</a>.</p>
    {% endif %}    

    <h2>Feature Upvotes</h2>
    {% if feature_upvotes %}
        {% for item in feature_upvotes %}
            <a href="{% url 'feature_details' item.feature.id %}">{{ item.feature }}</a>: â‚¬{{ item.price }}, {{ item.order.date }}<br>
        {% endfor %}
    {% else %}
        <p>You haven't upvoted any features. <a href="{% url 'list_features' %}">View the list of features</a>.</p>
    {% endif %}    
    
</div>

{% endblock %}